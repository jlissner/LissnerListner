"use strict";void function(e){function i(i){var t=e("<img/>",{src:"https://s3-us-west-2.amazonaws.com/lissnerlistner.com/"+i,alt:i,class:"m-Sm","duck-image-value":i.replace("-thumb2","").replace("images/",""),click:function(i){i.stopPropagation();var t=e(i.currentTarget);t.parent().find("img").attr("image-selected","false").removeClass("bw-Lg bc-Purp bs-S"),t.attr("image-selected","true").addClass("bw-Lg bc-Purp bs-S")}});return t}function t(e){return function(i){i.stopPropagation(),e.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function a(e,i,t){return function(a,n){return a.stopPropagation(),e.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void i.text("Sorry, something went wrong uploading your image."):(i.attr("duck-images",!1),void t.trigger("getFiles"))}}function n(e,i,t,a){return function(t){t.stopPropagation(),i.modal("show").attr("duck-image-picker",e.attr("duck-image-picker")),"false"===a.attr("duck-images")&&a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function r(e){return function(t,a,n){if(a||!n||!n.length)return void e.text("Sorry, something went wrong getting the images.");if("false"===e.attr("duck-images")){var r=n.filter(function(e){return e.Key.indexOf("-thumb2.")>-1}).sort(function(e,i){return e.LastModified>i.LastModified?-1:e.LastModified<i.LastModified?1:0}),c=r.length;e.find(".js-waiting").addClass("hidden");for(var o=0;o<c;o++)e.append(i(r[o].Key));e.attr("duck-images",!0)}}}function c(e,i,c,o,d){var u=e.find('input[type="file"]'),s={fileUploading:t(i),filesUploaded:a(i,o,e),gettingFiles:n(e,c,d,o),gotFiles:r(o)};e.find('[duck-button="image-select"]').on("click",function(){e.trigger("getFiles")}),u.on("change",function(){e.trigger("uploadFiles")}),e.filePicker(s),e.prop("filePickerInitiated",!0)}e(function(){var i=e("#ImagePickerModal"),t=i.find('[duck-button="upload"]'),a=i.find('[duck-button="save-image"]'),n=i.find("[duck-images]");t.on("click",function(){var t=i.attr("duck-image-picker"),a=e('[duck-type="image"][duck-image-picker='+t+"]"),n=a.find('input[type="file"]');n.click()}),a.on("click",function(t){t.stopPropagation(),t.preventDefault();var a=n.find('[image-selected="true"]').attr("duck-image-value")||"",r=i.attr("duck-image-picker"),c=e('[duck-type="image"][duck-image-picker='+r+"]");i.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),e('[duck-type="image"]').each(function(r,o){c(e(o),t,i,n,a)}),e('[duck-type="array"]').on("duckArrayItemAdded",function(r){var o=e(r.currentTarget),d=o.find('[duck-type="image"]').filter(function(i,t){return!e(t).prop("filePickerInitiated")});d.each(function(r,o){c(e(o),t,i,n,a)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
