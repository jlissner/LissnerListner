"use strict";void function(t){function e(t){var e='\n\t\t\t<div class="p-Sm d-Ib ta-C" style=\'max-width: 275px;\'>\n\t\t\t\t<span class="d-B bw-0 bbw-Sm bs-S mb-Sm">'+t.replace("images/","").replace("-thumb2","")+'</span>\n\t\t\t\t<img src="https://s3-us-west-2.amazonaws.com/stellaroute.com/'+t+'" alt="'+t+'" duck-image-value="'+t.replace("-thumb2","").replace("images/","")+'"/>\n\t\t\t</div>\n\t\t';return e}function i(t){return function(e){e.stopPropagation(),t.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function a(t,e,i){return function(a,n){return a.stopPropagation(),t.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void e.text("Sorry, something went wrong uploading your image."):(e.attr("duck-images",!1),void i.trigger("getFiles"))}}function n(t,e,i,a){return function(i){i.stopPropagation(),e.modal("show").attr("duck-image-picker",t.attr("duck-image-picker")),"false"===a.attr("duck-images")&&a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function r(i,a){return function(n,r,c,u){if(!u&&(r||!c||!c.length))return void a.text("Sorry, something went wrong getting the images.");if(!u){var d=c.filter(function(t){return t.Key.indexOf("-thumb2.")>-1}).sort(function(t,e){return t.LastModified>e.LastModified?-1:t.LastModified<e.LastModified?1:0}),o=d.length;a.find(".js-waiting").addClass("hidden");for(var s=0;s<o;s++)a.append(e(d[s].Key));a.attr("duck-images",!0)}a.find("img").attr("image-selected",!1).removeClass("bw-Lg bc-Purp bs-S").filter(function(e,a){return t(a).attr("duck-image-value")===i.find("[duck-value]").val()}).attr("image-selected",!0).addClass("bw-Lg bc-Purp bs-S")}}function c(t,e,c,u,d){var o=t.find('input[type="file"]'),s={fileUploading:i(e),filesUploaded:a(e,u,t),gettingFiles:n(t,c,d,u),gotFiles:r(t,u)};t.find('[duck-button="image-select"]').on("click",function(){t.trigger("getFiles",["true"===u.attr("duck-images")])}),o.on("change",function(){t.trigger("uploadFiles")}),t.filePicker(s),t.prop("filePickerInitiated",!0)}t(function(){var e=t("#ImagePickerModal"),i=e.find('[duck-button="upload"]'),a=e.find('[duck-button="save-image"]'),n=e.find("[duck-images]");i.on("click",function(){var i=e.attr("duck-image-picker"),a=t('[duck-type="image"][duck-image-picker='+i+"]"),n=a.find('input[type="file"]');n.click()}),n.on("click","img",function(e){e.stopPropagation();var i=t(e.currentTarget);n.find("img").filter(function(t,i){return i!==e.currentTarget}).attr("image-selected","false").removeClass("bw-Lg bc-Purp bs-S"),i.attr("image-selected","true"===i.attr("image-selected")?"false":"true").toggleClass("bw-Lg bc-Purp bs-S")}),a.on("click",function(i){i.stopPropagation(),i.preventDefault();var a=n.find('[image-selected="true"]').attr("duck-image-value")||"",r=e.attr("duck-image-picker"),c=t('[duck-type="image"][duck-image-picker='+r+"]");e.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),t('[duck-type="image"]').each(function(r,u){c(t(u),i,e,n,a)}),t('[duck-type="array"]').on("duckArrayItemAdded",function(r){var u=t(r.currentTarget),d=u.find('[duck-type="image"]').filter(function(e,i){return!t(i).prop("filePickerInitiated")});d.each(function(r,u){c(t(u),i,e,n,a)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
