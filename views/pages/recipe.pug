extends ..\layout.pug

block content
	if user && user.isAdmin
		+modal(recipe.url)
			+RecipieForm('update', recipe)
	.container
		h1= recipe.name
			|&nbsp;
			small= recipe.author
			if user && user.isAdmin
				button.btn.btn-primary.f-R(data-toggle='modal', data-target= `#${recipe.url}`) Edit
		.row.mt-Lg
			.col-xs-12.col-sm-5.col-md-3
				img.w-100.br-Md(src= recipe.image || 'http://maverickradio.com/wp-content/themes/fearless/images/missing-image-232x150.png', alt= recipe.name)
				.content-card
					h2.content-card--header Ingredients
					if recipe.ingredients
						for ingredient in recipe.ingredients
							if ingredient.title
								h3= ingredient.title
							if ingredient.ingredients
								ul
									for subIngredient in ingredient.ingredients
										li= subIngredient
				

				h2 Other Recipes
				for otherRecipe in recipes.filter((i) => i.Id !== recipe.Id)
					div(data-toggle='modal', data-target= `#${otherRecipe.url}`)
						+card(otherRecipe.image, otherRecipe.name)
			.col-xs-12.col-sm-7.col-md-9
				if recipe.description !== '<p><br></p>' && recipe.description !== '<br>'
					.lead!= recipe.description

				.content-card
					h2.content-card--header Directions
					ul.fc-G__dk.fs-Sm.list-inline
						if recipe.isGlutenFree
							li.pr-0 Gluten Free |
						if recipe.isVegitarian
							li.pr-0 Vegitarian |
						if recipe.isDairyFree
							li.pr-0 Dairy Free |
						li(data-icon='fa fa-clock-o')= ` ${recipe.time}`
						if recipe.serves
							li.pl-0= `| Serves ${recipe.serves}`
					ol
						for direction in recipe.directions.sort((a, b)=> {if(a.order>b.order){return 1;}if(a.order<b.order){return -1;}return 0;})
							li!= direction.direction

	for otherRecipe in recipes.filter((i) => i.Id !== recipe.Id)
		+modal(otherRecipe.url)
			h2= otherRecipe.name
			img.img-responsive.f-L(src=otherRecipe.image, alt= otherRecipe.name)
			.lead!= otherRecipe.description
			a(href=`/${otherRecipe.url}`) Full Recipie